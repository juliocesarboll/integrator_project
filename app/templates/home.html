<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="../static/fontawesome/css/all.min.css">
     <link rel="stylesheet" href="../static/style2.css">
     <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
</head>
<body>
    <script>
        function search(callback) {
            var searchTerm = document.getElementById("searchInput").value;
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "/search-caixa?descricao=" + encodeURIComponent(searchTerm), true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    var resposta = JSON.parse(xhr.responseText);
                    callback(resposta)
                } else {
                    console.error("Erro na solicitação: " + xhr.status);
                }
            };
            xhr.send();
        }

        function criaLista(lista){
            var ul = document.createElement("ul");
            for (var i = 0; i < lista.length; i++){
                var table = document.createElement("table");
                var p = document.createElement("p");
                p.appendChild(document.createTextNode(lista[i].nome));
            }

            var divResult = document.getElementById("result");
            divResult.appendChild(ul)
        }
    </script>
    <!--Menu Lateral-->   
      <input type="checkbox" id="sidebar-toggle">
         <div class="sidebar">
             <div class="sidebar-header">
             <h3 class="brand">
             <span class="ti-unlink"></span>
             <span>Taugor</span>
            </h3>
            <label for="sidebar-toggle" class=> <i class="fa-solid fa-bars"></i></label>
        </div>
            
        <div class="sidebar-menu">
            <ul>
                <li>
                    <a href="/home">
                        <form action="home" method="get">
                        <span class=><i class="fa-solid fa-house"></i></span>
                        <span>Home</span>
                    </form>
                    </a>
                </li>
               
                <li>
                    
                    <a href="/cadastra-caixa">
                        <form action="cadastra-caixa" method="get">
                        <span class=> <i class="fa-solid fa-box"></i></span>
                        <span>Cadastro de Caixas</span>
                    </form>
                    </a>
                </li>
                <li>
                    
                    <a href="/exit">
                        <form action="exit" method="get">
                        <span class=><i class="fa-solid fa-right-from-bracket"></i></span>
                        <span>Sair</span>
                    </form>
                    </a>
                
                </li>
               
            </ul>
        </div>
        <!--Menu Lateral--> 
          
        </div>
        <div class="main-content">
            <header>
                <form id="searchForm">
                <div class="search-wrapper">
                    <span class=><i class="fa-solid fa-magnifying-glass"></i></span>
                    <input id="searchInput" type="text" placeholder="Search">
                    <button type="button" onclick="search(criaLista)">Search</button>
                </div>
            </form>
            </header>
            <main>
                <div class="content">
                    <div class="titulo-secao">
                        <h2>Dashboard</h2>
                        <br/>
                    </div>
                </div>
                <div class="box-info">
                    <div class="box-info-single">
                        <div class="info-text">
                          <h3>Quantidade de Caixas</h3>
                          <p>{{ valorCaixa }}</p>
                        </div>
                        <i class="fa-solid fa-box-open"></i>
                    </div>
                </div>
                
                <div id="result"></div>
            </main>
        </div>
    </body>
</html>